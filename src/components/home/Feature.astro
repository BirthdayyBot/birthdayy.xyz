---
import { ArrowRight } from "../ui/Icon.jsx";
import IconText from "../ui/IconText.astro";

interface Props {
  title: string;
  description: string;
  imageName: string;
  points: string[];
  imagePosition: 'left' | 'right';
}

const { title, description, imageName, points, imagePosition } = Astro.props;

// Determine column order based on image position
const isImageLeft = imagePosition === 'left';
const textOrder = isImageLeft ? 'order-2' : 'order-1';
const imageOrder = isImageLeft ? 'order-1 order-2-mobile' : 'order-2 order-1-mobile';
---

<div class="feature columns is-centered is-multiline">
  <!-- Text Column -->
  <div class={`column is-2 ${textOrder}`}>
    <h3 class="block is-title is-size-3 mt-5 has-text-centered-touch">
      {title}
    </h3>
    <p class="block is-sub-title">{description}</p>
    {points && points.length > 0 && (
      <div class="block is-sub-title feature-points">
        {points.map((point) => (
          <IconText text={point}>
            <ArrowRight slot="icon" client:load />
          </IconText>
        ))}
      </div>
    )}
  </div>

  <!-- Image Column -->
  <div class={`column is-3 ${imageOrder}`}>
    <div class="feature-image-wrapper">
      <img
        src={`/media/images/features/${imageName}.webp`}
        width="1920"
        height="1680"
        loading="lazy"
        alt={`${title} feature screenshot`}
        class="showcase_image"
      />
    </div>
  </div>
</div>

<style lang="scss">
  .feature {
    margin-bottom: 2rem;
  }

  .feature-points {
    margin-top: 1rem;
  }

  .feature-image-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .showcase_image {
    border-radius: 1rem;
    max-width: 100%;
    height: auto;
    will-change: transform;
  }

  // Mobile-specific ordering
  @media screen and (max-width: 768px) {
    .order-1-mobile {
      order: 1;
    }

    .order-2-mobile {
      order: 2;
    }
  }
</style>
